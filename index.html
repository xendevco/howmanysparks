<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spark of Omens Tracker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 20%;
        }
        h1 {
            color: #4CAF50;
        }
        p {
            font-size: 1.5rem;
        }
        .script-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 20px;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
            font-size: 0.9rem; /* Smaller font */
            margin: 0;
            white-space: pre-wrap;
            word-break: break-word;
            max-width: 80%;
            overflow-x: auto;
        }
        button {
            margin-left: 10px;
            padding: 5px 10px;
            font-size: 0.9rem;
            cursor: pointer;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #e0e0e0;
        }
        button:hover {
            background-color: #d6d6d6;
        }
    </style>
</head>
<body>
    <h1>Spark of Omens Tracker</h1>
    <p id="fractured">Fractured Spark of Omens: Calculating...</p>
    <p id="spark">Spark of Omens: Calculating...</p>

    <div class="script-container">
        <pre id="wowScript">Generating script...</pre>
        <button onclick="copyToClipboard()">Copy</button>
    </div>

    <script>
        // Define the release date of the expansion
        const expansionReleaseDate = new Date('2024-08-26'); // Release date set to August 26, 2024
        const today = new Date();

        // Calculate weeks since release
        const weeksSinceRelease = Math.floor((today - expansionReleaseDate) / (7 * 24 * 60 * 60 * 1000));

        // Calculate the number of Fractured Sparks, including the extra from the quest
        const fracturedSparks = weeksSinceRelease + 1; // Adding 1 for the Omens Unified quest reward

        // Calculate the number of full Sparks
        const fullSparks = Math.floor(fracturedSparks / 2);

        // Update the webpage
        document.getElementById('fractured').innerText = `Fractured Spark of Omens: ${fracturedSparks}`;
        document.getElementById('spark').innerText = `Spark of Omens: ${fullSparks}`;

        // Generate the in-game script
        const wowScript = `/run a=C_CurrencyInfo.GetCurrencyInfo(3023) print("You have earned " .. a.totalEarned .. " of " .. a.maxQuantity .. " possible Fractured Spark of Omens")`;
        document.getElementById('wowScript').innerText = wowScript;

        // Function to copy script to clipboard
        function copyToClipboard() {
            const scriptText = document.getElementById('wowScript').innerText;
            navigator.clipboard.writeText(scriptText).then(() => {
                alert('Script copied to clipboard!');
            }).catch(err => {
                alert('Failed to copy script: ' + err);
            });
        }
    </script>
</body>
</html>
